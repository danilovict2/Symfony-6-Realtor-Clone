{% extends 'base.html.twig' %}

{% block title %}Profile
{% endblock %}

{% block body %}
	<div {{ vue_component('Profile', {name: user.name, email: user.email} ) }}></div>
	<div class="max-w-6xl px-3 mt-6 mx-auto">
		{% if listings|length > 0 %}
			<h2 class="text-2xl text-center font-semibold mb-6">My Listings</h2>
			<ul class="sm:grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5">
				{% for listing in listings %}
					<li class="relative bg-white flex flex-col justify-between items-center shadow-md hover:shadow-xl rounded-md overflow-hidden transition-shadow duration-150 m-[10px]">
						<a class="contents" href="#">
							<img class="h-[170px] w-full object-cover hover:scale-105 transition-scale duration-200 ease-in" loading="lazy" src={{ '/uploads/photos/' ~ listing.images[0] }}/>
							<p class="absolute top-2 left-2 bg-[#3377cc] text-white uppercase text-xs font-semibold rounded-md px-2 py-1 shadow-lg">
								{{ listing.createdAt|ago }}
							</p>
							<div class="w-full p-[10px]">
								<div class="flex items-center space-x-1">
									<i class="fa-solid fa-location-dot" style="color: rgb(22 163 74);"></i>
									<p class="font-semibold text-sm mb-[2px] text-gray-600 truncate">
										{{ listing.address }}
									</p>
								</div>
								<p class="font-semibold m-0 text-xl truncate">{{ listing.name }}</p>
								<p class="text-[#457b9d] mt-2 font-semibold">
									{% if listing.discountedPrice %}
										{{ listing.discountedPrice|format_currency("USD") }}
									{% else %}
										{{ listing.regularPrice|format_currency("USD") }}
									{% endif %}
									{% if listing.type == 'rent' %}
										/ month
									{% endif %}
								</p>
								<div class="flex items-center mt-[10px] space-x-3">
									<div class="flex items-center space-x-1">
										<p class="font-bold text-xs">
											{{ listing.bedrooms > 1 ? listing.bedrooms ~ 'Beds' : "1 Bed" }}
										</p>
									</div>
									<div class="flex items-center space-x-1">
										<p class="font-bold text-xs">
											{{ listing.bathrooms > 1 ? listing.bathrooms ~ 'Baths' : "1 Bath" }}
										</p>
									</div>
								</div>
							</div>
						</a>
					</li>
				{% endfor %}
			</ul>
		{% endif %}
	</div>
{% endblock %}
